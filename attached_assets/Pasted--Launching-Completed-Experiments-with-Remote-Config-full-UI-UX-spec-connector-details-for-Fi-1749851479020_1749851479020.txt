# Launching Completed Experiments with Remote Config

*(full UI / UX spec + connector details for Firebase RC, LaunchDarkly, AWS AppConfig)*

---

## 0‚ÄÇHigh-Level Flow

```
Connect ‚Üí Configure Registry ‚Üí Complete Experiment ‚Üí Launch via RC
```

1. **Connect** (one-time, in **Connect** tab)
2. **RC Registry** (global list of game-controlled flags)
3. **Completed Experiment Card** (shows winner)
4. **Launch Wizard** (push winner ‚Üí RC provider)

---

## 1‚ÄÇ‚ÄúConnect‚Äù Section (one-time setup)

### 1.1  Landing Grid

| Card                       | Contents                                 | CTA when *not* connected | CTA when connected      |
| -------------------------- | ---------------------------------------- | ------------------------ | ----------------------- |
| **Firebase Remote Config** | Google logo ‚Ä¢ status pill ‚Ä¢ project name | **Connect**              | **Manage ¬∑ Disconnect** |
| **LaunchDarkly**           | LD logo ¬∑ status                         | **Connect**              | **Manage ¬∑ Disconnect** |
| **AWS AppConfig**          | AWS logo ¬∑ status                        | **Connect**              | **Manage ¬∑ Disconnect** |

> Hover tooltip: ‚ÄúRC provider lets you roll out winning variants without a new build.‚Äù

---

### 1.2  Provider-specific ‚ÄúConnect‚Äù Modal

| Provider          | Required fields                                                                         | Test button                    | Save             |
| ----------------- | --------------------------------------------------------------------------------------- | ------------------------------ | ---------------- |
| **Firebase RC**   | ‚Ä¢ *Service Account JSON* upload<br>‚Ä¢ *Project ID*                                       | **Test** ‚Üí green ‚Äú‚úì Connected‚Äù | stores encrypted |
| **LaunchDarkly**  | ‚Ä¢ *Personal Access Token*<br>‚Ä¢ *Project Key*<br>‚Ä¢ *Environment* (prod/stage)            | **Test** fetches flags list    |                  |
| **AWS AppConfig** | ‚Ä¢ *AWS Access Key* ‚Ä¢ *Secret*<br>‚Ä¢ *Region*<br>‚Ä¢ *Application ID*<br>‚Ä¢ *Environment ID* | **Test** pulls latest config   |                  |

*Success banner:* ‚ÄúLaunch capabilities enabled ¬∑ Added by Abhas on 14 Jun 2025‚Äù.

---

## 2‚ÄÇRC Registry (global table)

> *Left-nav ‚Üí Remote Config*

| Column            | Description / UI widgets              |
| ----------------- | ------------------------------------- |
| **Feature Code**  | slug (editable)                       |
| **RC Key Path**   | dot-notation (`loot.booster.variant`) |
| **Type**          | `bool / string / int / json`          |
| **Default Value** | inline pill (truncate long JSON)      |
| **Last Updated**  | datetime                              |
| **‚ãÆ**             | Edit ‚Ä¢ Delete ‚Ä¢ History               |

Add / Edit modal validates uniqueness of **RC Key Path**.
Soft-delete marks row red, prevents new launches but preserves history.

---

## 3‚ÄÇCompleted Experiment Card ‚Äî Launcher Surface

### 3.1  Collapsed Row (list view)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Booster UX     Winner: B  (+5.3 pp)          ‚îÇ  Roll Out ‚ñæ  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

*Roll-out button state*

| Case                  | Primary button label  | Tooltip                                              |
| --------------------- | --------------------- | ---------------------------------------------------- |
| No provider connected | **Connect RC** (gray) | ‚ÄúAdd RC provider in Connect tab to enable launches.‚Äù |
| Provider(s) connected | **Roll Out ‚ñæ**        | opens ‚ÄúProvider picker‚Äù if >1                        |

### 3.2  Provider Picker (only if ‚â• 2)

Popup menu: Firebase ‚Ä¢ LaunchDarkly ‚Ä¢ AWS AppConfig (shows ‚úî current default).

---

## 4‚ÄÇLaunch Wizard (modal, 4 steps)

| Step                    | UI elements                                                                                                                                                                                                | Notes                                                                                                |
| ----------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------- |
| **1 Select Feature**    | ‚Ä¢ Searchable dropdown fed by RC Registry.<br>‚Ä¢ ‚Äú+ New Feature‚Äù if missing ‚Üí inline create (only Feature Code & Path).                                                                                      | Tag shows type & default.                                                                            |
| **2 Configure Payload** | Widget varies by **Type**:<br>‚Ä¢ **bool** toggle<br>‚Ä¢ **string/int** text input<br>‚Ä¢ **json** Monaco editor (height 180 px).<br>Prefill winner: `{ "variant":"variant_B" }`.                                | Validation hints under field.                                                                        |
| **3 Roll-out Strategy** | ‚Ä¢ **Traffic slider** (10-25-50-100 %)<br>‚Ä¢ Checkbox **‚ÄúAuto-Ramp‚Äù** (drop-down cadence presets).<br>‚Ä¢ Schedule (‚è∞ icon) optional date-time picker.<br>‚Ä¢ Environment (for LaunchDarkly / AWS) radio: *Prod* | Power & delta preview shown in side panel (‚ÄúWith current lift, 80 % power reached at 50 % traffic‚Äù). |
| **4 Review & Confirm**  | Summary card:<br>‚Ä¢ Provider, Feature, Payload JSON diff<br>‚Ä¢ Ramp plan<br>‚Ä¢ Roll-back note ‚ÄúPrevious RC version will be saved automatically.‚Äù                                                              | CTA **Ship Now** (brand blue).                                                                       |

*Confirmation toast:* ‚ÄúüöÄ RC version v20250614\_123 pushed ¬∑ full rollout ETA 30 min‚Äù

---

## 5‚ÄÇAfter Launch

| Card banner                                         | Buttons                                             |
| --------------------------------------------------- | --------------------------------------------------- |
| ‚ÄúRolled out via Firebase RC v20250614\_123 ‚Ä¢ 100 %‚Äù | **Roll-back** ‚Ä¢ View in RC provider (external link) |

Roll-back modal lists last 3 RC versions with version notes.

---

## 6‚ÄÇEdge-Case Behaviours

| Scenario                                          | UI feedback                                                                         |
| ------------------------------------------------- | ----------------------------------------------------------------------------------- |
| Registry feature deleted after experiment started | warning pill ‚ÄúFeature archived; cannot roll out.‚Äù                                   |
| Provider credential expired                       | red toast on ship attempt ‚Üí link to **Manage** in Connect.                          |
| JSON validation error (LaunchDarkly schema)       | Step 2 shows red border + provider-specific error.                                  |
| Experiment multi-metric winners                   | Step 1 shows pre-selected variant but banner ‚ÄúChoose primary metric before launch‚Äù. |

---

## 7‚ÄÇMicro-copy

* ‚ÄúTraffic‚Äù slider label: ‚ÄúAudience exposure‚Äù.
* Auto-Ramp tooltip: ‚ÄúRamp 25 % every 30 min until 100 %‚Äù.
* Ship confirm prompt: ‚ÄúAre you sure you want to push Variant B to 100 % of users via Firebase Remote Config?‚Äù
* Roll-back confirm: ‚ÄúRestore RC version v20250613\_987?‚Äù
* Disabled state: ‚ÄúWinner not significant yet ‚Äî roll-out disabled.‚Äù

---

## 8‚ÄÇVisual Tokens

| Token                | Value                                                     |
| -------------------- | --------------------------------------------------------- |
| Provider color strip | Firebase (#FFA000), LaunchDarkly (#5C6BC0), AWS (#FF9900) |
| Traffic slider fill  | #3B82F6 (blue-500)                                        |
| Disabled button      | bg gray-200, text gray-500                                |
| Danger (roll-back)   | bg red-50, text red-600                                   |

---

## 9‚ÄÇBackend Endpoints

| Endpoint                           | Purpose                                                |
| ---------------------------------- | ------------------------------------------------------ |
| `POST /connectors/:provider`       | store creds (encrypted) + test                         |
| `GET  /connectors`                 | list status                                            |
| `POST /rc-registry`                | add feature                                            |
| `GET  /rc-registry`                | list / search                                          |
| `POST /experiments/:id/rollout`    | send provider, featureCode, payload, gradual, schedule |
| `POST /rc/rollback`                | restore version                                        |
| `GET  /experiments/:id/launch-log` | render audit timeline                                  |

Push worker handles provider-specific SDK (Firebase Admin, LaunchDarkly REST, AWS SDK) and logs version to `rc_versions` table.

---

### Deliverable Summary

* **Connect Tab**: cards for Firebase, LaunchDarkly, AWS ‚Äî connect / manage flows.
* **Global RC Registry**: discoverable CRUD for flags & defaults.
* **Completed Experiment Card**: context-aware **Roll Out** button.
* **Launch Wizard**: 4 guided steps with validation, power hints, rollback safety.
* Uniform post-launch banner + rollback control.
* Provider-agnostic backend endpoints; provider modules swap in under `/services/rcManager`.

This spec keeps configuration complexity isolated to **Connect**, while the **Experiment card** remains a clean, single-click launch surface for every completed test.
